<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Cà phê muối — Quảng cáo</title>
<style>
  /* ====== Reset & base ====== */
  * {box-sizing: border-box}
  html,body{height:100%;margin:0;font-family: "Helvetica Neue", Arial, sans-serif; color:#fff}
  a{color:inherit;text-decoration:none}
  /* ====== Background chung ====== */
  :root{
    --accent:#e2c48d;
    --coffee:#5b3926;
  }
  body{
    background-image: url('https://raw.githubusercontent.com/focustimewithcake/-m-thanh-h-nh-nh/425e8258fe45e93404cd111a532b172b36ece3a8/nen.png');
    background-size: cover;
    background-attachment: fixed;
    background-position: center;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    overflow:hidden;
  }

  /* ====== Splash screen ====== */
  .splash {
    position:fixed; inset:0; display:flex; align-items:center; justify-content:center; flex-direction:column;
    background: rgba(0,0,0,0.25);
    z-index:50;
  }
  .splash .gif {
    width: min(520px, 88vw);
    max-height: 70vh;
    object-fit:contain;
    /* Loại bỏ hiệu ứng */
    border-radius: 0;
    box-shadow: none;
    opacity:0; transform:translateY(8px);
    animation: fadeInUp 1.2s forwards;
  }
  @keyframes fadeInUp {
    to {opacity:1; transform:none}
  }

  .tap {
    margin-top:18px;
    font-size:20px;
    font-weight:600;
    background: rgba(255,255,255,0.06);
    padding:10px 20px;
    border-radius:30px;
    cursor:not-allowed;
    opacity:0;
  }
  .tap.enabled { cursor:pointer; opacity:1; }
  .blink { animation: blink 1s infinite; }
  @keyframes blink {0%,100%{opacity:1}50%{opacity:0}}

  /* ====== App main container ====== */
  .app {
    position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:10;
    padding:20px;
  }
  .carousel {
    width: min(1100px, 96vw);
    max-width:1100px;
    height: min(720px, 92vh);
    background: rgba(0,0,0,0.22);
    border-radius:18px;
    overflow:hidden;
    display:flex; align-items:center; justify-content:center; position:relative;
    box-shadow: 0 10px 40px rgba(0,0,0,0.5);
  }

  /* Slides wrapper */
  .slides {
    width:100%; height:100%; display:flex; transition: transform .55s cubic-bezier(.2,.9,.2,1);
  }
  .slide {
    width:100%; height:100%; flex:0 0 100%; display:flex; align-items:center; justify-content:center; position:relative;
    padding:0; /* Loại bỏ padding để ảnh chiếm toàn bộ không gian */
  }
  .slide img.full {
    width: 100%;
    height: 100%;
    object-fit: contain;
    /* Loại bỏ hoàn toàn hiệu ứng */
    border-radius: 0;
    box-shadow: none;
    filter: none;
    display: block;
  }

  /* indicators & arrows */
  .indicator-bar {
    position:absolute; bottom:18px; left:50%; transform:translateX(-50%); display:flex; align-items:center; gap:12px;
    align-self:flex-end;
  }
  .line {
    width:280px; height:2px; background: rgba(255,255,255,0.12); position:relative; border-radius:2px;
  }
  .dots {
    position:absolute; left:8px; right:8px; top:-12px; height:30px; display:flex; align-items:center; justify-content:space-between;
  }
  .dot {
    width:14px; height:14px; background:rgba(255,255,255,0.28); border-radius:50%; transition:.25s;
    display:flex;align-items:center;justify-content:center;
  }
  .dot.big { width:28px; height:28px; background:var(--accent); color:#333; font-weight:700; }
  .arrow {
    position:absolute; top:50%; transform:translateY(-50%); width:44px; height:44px; border-radius:50%;
    background: rgba(255,255,255,0.06); display:flex; align-items:center; justify-content:center; cursor:pointer;
    box-shadow: 0 6px 18px rgba(0,0,0,0.4);
    z-index: 20;
  }
  .arrow.left { left:5px; }
  .arrow.right { right:5px; }
  .arrow:hover { transform: translateY(-50%) scale(1.05); background: rgba(255,255,255,0.11) }

  /* Địa điểm: hint kéo xuống */
  .down-hint {
    position:absolute; bottom:92px; left:50%; transform:translateX(-50%); text-align:center; opacity:0;
    transition:opacity .4s;
  }
  .down-hint.visible { opacity:1 }
  .down-hint .arrow-down {
    display:block; font-size:28px; transform:translateY(0); animation: bounce 1.4s infinite;
  }
  @keyframes bounce { 0%{transform:translateY(0)}50%{transform:translateY(-10px)}100%{transform:translateY(0)} }

  /* ====== Section reveal (Buôn Ma Thuột) ====== */
  .reveal-container {
    position:relative; width:100%; height:100%; overflow:auto; background: linear-gradient(180deg, rgba(0,0,0,0.22), rgba(0,0,0,0.4));
  }
  .reveal-top {
    height:45%; display:flex; align-items:center; justify-content:center; flex-direction:column; gap:12px;
    transform: translateY(40px); opacity:0; transition: all .5s;
  }
  .reveal-top.visible { transform:none; opacity:1 }
  .city-title { font-size:36px; font-weight:800; letter-spacing:1px; color:var(--accent) }
  .icons-row { display:flex; gap:18px; align-items:center; justify-content:center; flex-wrap:wrap; padding:10px; }
  .place-icon {
    width:96px; height:96px; background: rgba(255,255,255,0.06); border-radius:14px; display:flex; align-items:center; justify-content:center;
    cursor:pointer; box-shadow: 0 8px 20px rgba(0,0,0,0.4); transition: transform .22s, box-shadow .22s;
  }
  .place-icon img { max-width:70%; max-height:70% }
  .place-icon:hover { transform: translateY(-6px); box-shadow: 0 20px 30px rgba(0,0,0,0.6) }

  /* ========== Popup / Modal ========== */
  .modal-backdrop {
    position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:80;
    background: rgba(0,0,0,0.6);
  }
  .modal-backdrop.show { display:flex }
  .modal {
    width:min(760px,92vw); max-height:86vh; overflow:auto; background:#fff; color:#111; border-radius:12px; padding:18px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.6);
    position: relative;
  }
  .modal img { 
    max-width:100%; 
    display:block; 
    /* Loại bỏ hiệu ứng */
    border-radius: 0;
    box-shadow: none;
    margin-bottom:12px 
  }
  .modal .close {
    position:absolute; right:18px; top:12px; background:transparent; border:none; font-size:18px; cursor:pointer;
    color: #333;
    z-index: 90;
  }

  /* ========== Đặt ngay button ========== */
  .order-btn {
    position:fixed; right:20px; bottom:20px; z-index:70;
    background:var(--coffee); color:#fff; padding:14px 18px; border-radius:14px; font-weight:700; cursor:pointer;
    box-shadow: 0 12px 30px rgba(0,0,0,0.6);
    border: none;
  }
  .order-btn:hover { transform:translateY(-4px) }

  /* ========== Nút xem chi tiết ========== */
  .detail-btn {
    background: rgba(255,255,255,0.1);
    color: white;
    border: 1px solid rgba(255,255,255,0.3);
    padding: 10px 20px;
    border-radius: 20px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s;
    /* Di chuyển lên 20% */
    margin-top: -20%;
    position: absolute;
    bottom: 30%;
    z-index: 5;
  }
  .detail-btn:hover {
    background: rgba(255,255,255,0.2);
    transform: translateY(-2px);
  }

  /* ========== Chi tiết slide ========== */
  .detail-slide {
    display: none;
    width: 100%;
    height: 100%;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: 0;
    left: 0;
  }
  .detail-slide.active {
    display: flex;
  }
  .detail-slide img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    /* Loại bỏ hoàn toàn hiệu ứng */
    border-radius: 0;
    box-shadow: none;
    filter: none;
  }
  .back-btn {
    background: rgba(255,255,255,0.1);
    color: white;
    border: 1px solid rgba(255,255,255,0.3);
    padding: 10px 20px;
    border-radius: 20px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s;
    /* Di chuyển lên 20% */
    margin-top: -20%;
    position: absolute;
    bottom: 30%;
    z-index: 5;
  }
  .back-btn:hover {
    background: rgba(255,255,255,0.2);
    transform: translateY(-2px);
  }

  /* Container cho nút */
  .button-container {
    position: absolute;
    bottom: 30%;
    width: 100%;
    display: flex;
    justify-content: center;
    z-index: 5;
  }

  /* ====== Responsive ====== */
  @media (max-width:720px){
    .carousel { 
      height: 100vh;
      width: 100vw;
      border-radius: 0;
      margin: 0;
      padding: 0;
    }
    .app {
      padding: 0;
    }
    .slide img.full {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
    .city-title { font-size:28px }
    .place-icon { width:78px; height:78px }
    .arrow.left { left: 2px; }
    .arrow.right { right: 2px; }
    .detail-btn, .back-btn {
      bottom: 25%; /* Điều chỉnh cho mobile */
      padding: 12px 24px;
      font-size: 16px;
    }
    .indicator-bar {
      bottom: 30px;
    }
  }

  @media (max-width:480px){
    .detail-btn, .back-btn {
      bottom: 20%;
      padding: 10px 20px;
      font-size: 14px;
    }
    .indicator-bar {
      bottom: 20px;
    }
  }
</style>
</head>
<body>

<!-- SPLASH -->
<div class="splash" id="splash">
  <img class="gif" src="https://raw.githubusercontent.com/focustimewithcake/-m-thanh-h-nh-nh/425e8258fe45e93404cd111a532b172b36ece3a8/Ph%C3%BAc%20Long.gif" alt="Phuc Long GIF">
  <div id="taptext" class="tap">Bấm để tiếp tục</div>
</div>

<!-- APP -->
<div class="app" id="app" aria-hidden="true">
  <div class="carousel" role="region" aria-label="Trình quảng cáo cà phê muối">
    <div class="arrow left" id="leftArrow" title="Lùi (trái)">&lt;</div>
    <div class="arrow right" id="rightArrow" title="Tiến (phải)">&gt;</div>

    <div class="slides" id="slides">
      <!-- Slide 0: Nguồn -->
      <section class="slide" data-slide="0">
        <img class="full" src="https://raw.githubusercontent.com/focustimewithcake/-m-thanh-h-nh-nh/425e8258fe45e93404cd111a532b172b36ece3a8/nguoon.png" alt="Nguồn">
        <div class="button-container">
          <button class="detail-btn" data-type="nguon">Xem chi tiết</button>
        </div>
        
        <!-- Chi tiết nguồn (ẩn ban đầu) -->
        <div class="detail-slide" id="nguon-detail">
          <img src="https://raw.githubusercontent.com/focustimewithcake/-m-thanh-h-nh-nh/2fd47fd0aef709549cd3dec1a6e592c13718326b/nguon%20chi.png" alt="Nguồn chi tiết">
          <div class="button-container">
            <button class="back-btn" data-type="nguon">Quay lại</button>
          </div>
        </div>
      </section>

      <!-- Slide 1: Nguyên liệu -->
      <section class="slide" data-slide="1">
        <img class="full" src="https://raw.githubusercontent.com/focustimewithcake/-m-thanh-h-nh-nh/425e8258fe45e93404cd111a532b172b36ece3a8/nguyeen%20lieu.png" alt="Nguyên liệu">
        <div class="button-container">
          <button class="detail-btn" data-type="nguyenlieu">Xem chi tiết</button>
        </div>
        
        <!-- Chi tiết nguyên liệu (ẩn ban đầu) -->
        <div class="detail-slide" id="nguyenlieu-detail">
          <img src="https://raw.githubusercontent.com/focustimewithcake/-m-thanh-h-nh-nh/2fd47fd0aef709549cd3dec1a6e592c13718326b/thanh%20phan%20chi.png" alt="Nguyên liệu chi tiết">
          <div class="button-container">
            <button class="back-btn" data-type="nguyenlieu">Quay lại</button>
          </div>
        </div>
      </section>

      <!-- Slide 2: Địa điểm -->
      <section class="slide" data-slide="2">
        <!-- reveal-container cho phần kéo xuống -->
        <div class="reveal-container" id="revealContainer">
          <div style="flex:1;display:flex;align-items:center;justify-content:center; width: 100%; height: 100%;">
            <img class="full" src="https://raw.githubusercontent.com/focustimewithcake/-m-thanh-h-nh-nh/2fd47fd0aef709549cd3dec1a6e592c13718326b/%C4%90a%CC%A3%CC%86t%20ngay%20%E2%80%93%20thu%CC%9Bo%CC%9B%CC%89ng%20thu%CC%9B%CC%81c%20lie%CC%82%CC%80n.%20(1080%20x%201350%20px)%20(1080%20x%201920%20px).png" alt="Dia diem">
          </div>

          <!-- hidden reveal area -->
          <div style="padding:18px;">
            <div id="revealTop" class="reveal-top">
              <div class="city-title">Buôn Ma Thuột</div>
              <div class="icons-row" id="iconsRow">
                <!-- icons (dau.png) -->
                <div class="place-icon" data-place="Quán Muối 1"><img src="https://raw.githubusercontent.com/focustimewithcake/-m-thanh-h-nh-nh/2fd47fd0aef709549cd3dec1a6e592c13718326b/dau.png" alt="dau"></div>
                <div class="place-icon" data-place="Quán Muối 2"><img src="https://raw.githubusercontent.com/focustimewithcake/-m-thanh-h-nh-nh/2fd47fd0aef709549cd3dec1a6e592c13718326b/dau.png" alt="dau"></div>
                <div class="place-icon" data-place="Quán Muối 3"><img src="https://raw.githubusercontent.com/focustimewithcake/-m-thanh-h-nh-nh/2fd47fd0aef709549cd3dec1a6e592c13718326b/dau.png" alt="dau"></div>
                <div class="place-icon" data-place="Quán Muối 4"><img src="https://raw.githubusercontent.com/focustimewithcake/-m-thanh-h-nh-nh/2fd47fd0aef709549cd3dec1a6e592c13718326b/dau.png" alt="dau"></div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- indicator bar -->
    <div class="indicator-bar">
      <div class="line">
        <div class="dots" id="dots">
          <div class="dot big" data-index="0">1</div>
          <div class="dot" data-index="1"></div>
          <div class="dot" data-index="2"></div>
        </div>
      </div>
    </div>

    <!-- down hint -->
    <div class="down-hint" id="downHint">
      <div class="arrow-down">⬇</div>
      <div style="font-weight:600">Kéo xuống</div>
    </div>

  </div>
</div>

<!-- Modal backdrop for details -->
<div class="modal-backdrop" id="modalBackdrop">
  <div class="modal" id="modalContent">
    <button class="close" id="modalClose">✕</button>
    <div id="modalInner"></div>
  </div>
</div>

<!-- Order button -->
<button class="order-btn" id="orderBtn">Đặt ngay</button>

<script>
/* ========== MAIN JS ========== */
(function(){
  const splash = document.getElementById('splash');
  const tapText = document.getElementById('taptext');
  const app = document.getElementById('app');
  const slides = document.getElementById('slides');
  const leftArrow = document.getElementById('leftArrow');
  const rightArrow = document.getElementById('rightArrow');
  const dots = document.querySelectorAll('.dot');
  const downHint = document.getElementById('downHint');
  const revealTop = document.getElementById('revealTop');
  const revealContainer = document.getElementById('revealContainer');
  const modalBackdrop = document.getElementById('modalBackdrop');
  const modalInner = document.getElementById('modalInner');
  const modalClose = document.getElementById('modalClose');
  const orderBtn = document.getElementById('orderBtn');

  let current = 0;
  let canProceed = false; // for splash 2s rule
  let revealShown = false;
  let hasShownDownHint = false; // Biến để theo dõi đã hiển thị mũi tên xuống chưa

  // enable tap after 2s
  setTimeout(() => {
    tapText.classList.add('enabled','blink');
    tapText.style.cursor = 'pointer';
    canProceed = true;
  }, 2000);

  // Splash click
  function enterApp() {
    if(!canProceed) return;
    splash.style.transition = 'opacity .5s';
    splash.style.opacity = 0;
    setTimeout(()=>{ splash.style.display='none'; app.setAttribute('aria-hidden','false') }, 540);
  }

  splash.addEventListener('click', enterApp);
  tapText.addEventListener('click', enterApp);

  // slide control
  function goTo(index) {
    index = Math.max(0, Math.min(2, index));
    current = index;
    slides.style.transform = `translateX(-${index * 100}%)`;

    // update dots
    dots.forEach((d,i)=>{
      d.classList.toggle('big', i === index);
      d.style.background = (i === index) ? 'var(--accent)' : 'rgba(255,255,255,0.28)';
      d.textContent = (i === index) ? (i+1) : '';
    });

    // when at index 2 (Địa điểm) -> show down hint after 2s (chỉ hiển thị một lần)
    if(index === 2 && !hasShownDownHint) {
      // hide reveal initially
      revealTop.classList.remove('visible');
      revealShown = false;
      setTimeout(()=> {
        downHint.classList.add('visible');
        hasShownDownHint = true; // Đánh dấu đã hiển thị
      }, 2000);
    } else {
      downHint.classList.remove('visible');
    }
  }

  leftArrow.addEventListener('click', (e) => {
    e.stopPropagation(); // Ngăn sự kiện lan ra ngoài
    goTo(current-1);
  });
  rightArrow.addEventListener('click', (e) => {
    e.stopPropagation(); // Ngăn sự kiện lan ra ngoài
    goTo(current+1);
  });
  dots.forEach(d=> d.addEventListener('click', (e)=> {
    e.stopPropagation(); // Ngăn sự kiện lan ra ngoài
    goTo(Number(d.dataset.index));
  }));

  // initial
  goTo(0);

  // show reveal when user scrolls / clicks downHint / touches inside the slide area
  downHint.addEventListener('click', revealArea);
  
  // allow swipe/drag: detect wheel/touchmove on revealContainer
  let touchStartY = null;
  revealContainer.addEventListener('wheel', (e)=>{
    if(current === 2 && e.deltaY > 20 && !revealShown) {
      revealArea();
    }
  }, {passive:true});
  
  revealContainer.addEventListener('touchstart', (e)=> { 
    touchStartY = e.touches[0].clientY; 
  }, {passive:true});
  
  revealContainer.addEventListener('touchmove', (e)=> {
    if(!touchStartY) return;
    let dy = touchStartY - e.touches[0].clientY;
    if(current === 2 && dy > 30 && !revealShown) {
      revealArea();
    }
  }, {passive:true});

  function revealArea() {
    if(revealShown) return;
    revealShown = true;
    
    // Cuộn xuống phần reveal
    revealContainer.scrollTo({
      top: revealContainer.scrollHeight,
      behavior: 'smooth'
    });
    
    setTimeout(() => {
      revealTop.classList.add('visible');
      downHint.classList.remove('visible');
    }, 500);
  }

  // place icons click -> show list of cafes (example content)
  document.querySelectorAll('.place-icon').forEach(icon => {
    icon.addEventListener('click', ()=>{
      const placeName = icon.dataset.place || 'Quán cà phê';
      openModal(`<h2>${placeName}</h2>
        <p>Danh sách quán cà phê muối ở <strong>Buôn Ma Thuột</strong> (ví dụ):</p>
        <ul>
          <li><strong>Muối & Cà phê</strong> — 12 Nguyễn Văn Cừ</li>
          <li><strong>Góc Muối</strong> — 45 Lê Duẩn</li>
          <li><strong>Cà phê Muối Nhà</strong> — 78 Đường Trần Hưng Đạo</li>
        </ul>
        <p>Góc phải dưới có nút <strong>Đặt ngay</strong> để bản demo mô phỏng hành động đặt.</p>
      `);
    });
  });

  // modal open/close
  function openModal(html) {
    modalInner.innerHTML = html;
    modalBackdrop.classList.add('show');
  }
  modalClose.addEventListener('click', ()=> modalBackdrop.classList.remove('show'));
  modalBackdrop.addEventListener('click', (e)=> { if(e.target === modalBackdrop) modalBackdrop.classList.remove('show'); });

  // Detail buttons (Nguồn / Nguyên liệu)
  document.querySelectorAll('.detail-btn').forEach(btn=>{
    btn.addEventListener('click', (e)=>{
      e.stopPropagation(); // Ngăn sự kiện lan ra ngoài
      const t = btn.dataset.type;
      const slide = btn.closest('.slide');
      const detailSlide = slide.querySelector(`#${t}-detail`);
      const mainContent = slide.querySelector('img.full');
      const buttonContainer = slide.querySelector('.button-container');
      
      // Ẩn nội dung chính, hiển thị chi tiết
      mainContent.style.display = 'none';
      buttonContainer.style.display = 'none';
      detailSlide.classList.add('active');
    });
  });

  // Back buttons (Quay lại từ chi tiết)
  document.querySelectorAll('.back-btn').forEach(btn=>{
    btn.addEventListener('click', (e)=>{
      e.stopPropagation(); // Ngăn sự kiện lan ra ngoài
      const t = btn.dataset.type;
      const slide = btn.closest('.slide');
      const detailSlide = slide.querySelector(`#${t}-detail`);
      const mainContent = slide.querySelector('img.full');
      const buttonContainer = slide.querySelector('.button-container');
      
      // Ẩn chi tiết, hiển thị nội dung chính
      detailSlide.classList.remove('active');
      mainContent.style.display = 'block';
      buttonContainer.style.display = 'flex';
    });
  });

  // Order button behavior (demo)
  orderBtn.addEventListener('click', ()=> {
    openModal(`<h2>Đặt ngay</h2>
      <p>Form đặt hàng (demo). Điền thông tin và xác nhận.</p>
      <form onsubmit="return false;">
        <label>Tên: <input required style="width:100%;padding:8px;margin:6px 0"></label>
        <label>Số điện thoại: <input required style="width:100%;padding:8px;margin:6px 0"></label>
        <label>Ghi chú: <textarea style="width:100%;padding:8px;margin:6px 0"></textarea></label>
        <div style="display:flex;gap:8px;justify-content:flex-end">
          <button type="button" onclick="document.getElementById('modalBackdrop').classList.remove('show')">Hủy</button>
          <button type="button" onclick="alert('Cảm ơn! Yêu cầu đặt hàng đã được gửi (demo).'); document.getElementById('modalBackdrop').classList.remove('show')">Xác nhận</button>
        </div>
      </form>`);
  });

  // keyboard navigation
  window.addEventListener('keydown', (e)=>{
    if(e.key === 'ArrowLeft') goTo(current-1);
    if(e.key === 'ArrowRight') goTo(current+1);
  });

  // small touch-swipe support for slides
  let sx=null, sy=null;
  slides.addEventListener('touchstart', (e)=> { 
    sx = e.touches[0].clientX; 
    sy = e.touches[0].clientY; 
  }, {passive:true});
  
  slides.addEventListener('touchend', (e)=> {
    if(sx === null) return;
    const ex = e.changedTouches[0].clientX;
    const dx = sx - ex;
    if(Math.abs(dx) > 40 && Math.abs(dx) > 0.3 * (sy || 1)) {
      if(dx > 0) goTo(current+1); 
      else goTo(current-1);
    }
    sx=null; sy=null;
  }, {passive:true});

  // Accessibility: allow clicking large slide area to advance once reveal shown (optional)
  slides.addEventListener('click', (e)=> {
    // Nếu click vào slide (không phải vào các phần tử con) thì chuyển slide
    if(e.target === slides || e.target.classList.contains('slide')) {
      if(current !== 2) goTo(current+1);
    }
  });

})();
</script>
</body>
</html>
